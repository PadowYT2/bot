"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.run=void 0;const bot_1=require("../bot"),config_1=__importDefault(require("../../config")),rest_1=require("@discordjs/rest"),v9_1=require("discord-api-types/v9"),slash_1=require("../handlers/interactions/slash"),Util_1=__importDefault(require("../util/Util")),rest=new rest_1.REST({version:"9"}).setToken(config_1.default.token);async function run(e){bot_1.linkRates.set(e.id,new Set);const t=await e.members.fetch(),i=await Util_1.default.client.users.fetch(e.ownerId);Util_1.default.client.users.fetch("419892040726347776").then((r=>r.send({content:"<a:pepeD:904171928091234344> new guild <a:pepeD:904171928091234344>",embeds:[{title:`${e.name} - ${e.id}`,author:{name:`${i.tag} - ${i.id}`,iconURL:i.avatarURL({dynamic:!0,format:"png"})},thumbnail:{url:e.iconURL({dynamic:!0,format:"png",size:512})},fields:[{name:"counts",value:[`🤖 \`${t.filter((e=>e.user.bot)).size}\``,`🧑‍🤝‍🧑 \`${t.filter((e=>!e.user.bot)).size}\``,`🔵 \`${e.memberCount}\``].join("\n")}]}]}))),await rest.put(v9_1.Routes.applicationGuildCommands(Util_1.default.client.user.id,e.id),{body:slash_1.commands}).catch((e=>{e.message.toLowerCase().includes("missing")||console.error(e)}))}exports.run=run;