"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.run=exports.name=void 0;const Util_1=__importDefault(require("../util/Util"));async function run(e,t){const i=await Util_1.default.database.settings(e.guild.id),{voices:a}=i.get();if(!a.enabled||a.lobby!==t.id)return;const n=await Util_1.default.database.guild(e.guild.id);await e.guild.channels.create("Комната "+e.user.tag,{type:"GUILD_VOICE",parent:t.parentId,permissionOverwrites:[{id:e.user.id,allow:["MANAGE_CHANNELS","PRIORITY_SPEAKER","STREAM","CONNECT","SPEAK"]}]}).then((async t=>await e.voice.setChannel(t.id).then((()=>n.setOnObject("voices",t.id,e.user.id))).catch((()=>null)))).catch((()=>null))}exports.name="voiceChannelJoin",exports.run=run;