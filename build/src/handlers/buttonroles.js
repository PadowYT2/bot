"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const discord_js_1=require("discord.js"),database_1=__importDefault(require("../database/"));module.exports=async e=>{if(!(e.member instanceof discord_js_1.GuildMember))return;const a=e.guild;if(!e.member.manageable||!a.me.permissions.has("MANAGE_ROLES"))return await e.reply({content:"❌ У меня нет прав на изменение ролей.",ephemeral:!0});await e.deferReply({ephemeral:!0}).catch((()=>null));const t=await database_1.default.guild(a.id),{brs:i}=t.get(),s=i[e.customId.slice(3)],r=await e.guild.roles.fetch(s).catch((()=>null));if(!r||r.rawPosition>e.guild.me.roles.highest.rawPosition)return await e.editReply("❌ Роль не была найдена или её позиция выше моей.");e.member.roles.cache.has(r.id)?await e.member.roles.remove(r).then((async()=>await e.editReply(`✅ Роль ${r} убрана.`))).catch((async a=>{console.log(a),await e.editReply("❌ Произошла ошибка.")})):await e.member.roles.add(r).then((async()=>await e.editReply(`✅ Роль ${r} выдана.`))).catch((async a=>{console.log(a),await e.editReply("❌ Произошла ошибка.")}))};