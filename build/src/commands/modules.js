"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.run=exports.permission=exports.options=void 0;const builders_1=require("@discordjs/builders");exports.options=(new builders_1.SlashCommandBuilder).setName("modules").setDescription("–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–¥—É–ª–∏ —Å—á—ë—Ç–∞.").toJSON(),exports.permission=2;const database_1=__importDefault(require("../database/")),discord_js_1=require("discord.js"),modules_1=require("../constants/modules"),names={"allow-spam":"Allow spam",embed:"Embed",talking:"Talking",webhook:"Webhook"},run=async e=>{const s=await database_1.default.guild(e.guild.id),{modules:t}=s.get(),o=(await e.reply({content:"‚Äã",fetchReply:!0,components:[(new discord_js_1.MessageActionRow).setComponents([(new discord_js_1.MessageSelectMenu).setPlaceholder("–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª–∏").setCustomId("modules_menu").setMinValues(0).setMaxValues(4).setOptions(Object.keys(modules_1.modules).map((e=>({label:names[e],value:e,description:modules_1.modules[e].short,default:t.includes(e)}))))])]})).createMessageComponentCollector({filter:s=>"modules_menu"==s.customId&&s.user.id==e.user.id,componentType:"SELECT_MENU",time:6e4,idle:3e4});o.on("collect",(()=>o.stop("abc"))),o.on("end",(async(o,n)=>{if("abc"!=n)await e.editReply({content:"–í—Ä–µ–º—è –≤—ã—à–ª–æ.",components:[(new discord_js_1.MessageActionRow).setComponents([(new discord_js_1.MessageButton).setCustomId("reply:delete").setStyle("DANGER").setEmoji("üóë")])]});else{const e=o.first()?.values;if(e.includes("embed")&&e.includes("webhook"))return await o.first().update({content:"–ú–æ–¥—É–ª–∏ **Embed** –∏ **Webhook** –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã.",components:[(new discord_js_1.MessageActionRow).setComponents([(new discord_js_1.MessageButton).setCustomId("reply:delete").setStyle("DANGER").setEmoji("üóë")])]});const n=t?.map((e=>names[e])).join("**, **")||"–ü—É—Å—Ç–æ",d=e?.map((e=>names[e])).join("**, **")||"–ü—É—Å—Ç–æ";s.set("modules",e),await o.first().update({content:["‚Äã> **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**",`–ü—Ä–æ—à–ª—ã–µ –º–æ–¥—É–ª–∏: **${n}**`,`–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏: **${d}**`].join("\n"),components:[(new discord_js_1.MessageActionRow).setComponents([(new discord_js_1.MessageButton).setCustomId("reply:delete").setStyle("DANGER").setEmoji("üóë")])]})}}))};exports.run=run;